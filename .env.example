# Custom Model Proxy Configuration - Multi-Provider Edition
# Route each Claude Code model tier to different providers!
#
# IMPORTANT: Copy this file to .env and fill in your actual values
# Never commit .env to version control!

# ============================================================================
# HAIKU PROVIDER (Z.AI - Recommended for cost savings)
# ============================================================================
# Z.AI provides Z.AI-4.7 at ~70x cheaper than Anthropic Haiku
# Get API key from: https://z.ai
HAIKU_PROVIDER_API_KEY=your_zai_api_key_here
HAIKU_PROVIDER_BASE_URL=https://api.z.ai/api/anthropic

# ============================================================================
# OPUS PROVIDER 
# ============================================================================
OPUS_PROVIDER_API_KEY=your_opus_provider_api_key
OPUS_PROVIDER_BASE_URL=https://api.provider.com/v1

# ============================================================================
# SONNET PROVIDER
# ============================================================================
# Leave empty to use real Claude with your OAuth subscription
# Set to route Sonnet to custom provider
# SONNET_PROVIDER_API_KEY=your_sonnet_provider_api_key
# SONNET_PROVIDER_BASE_URL=https://api.provider.com/v1

# ============================================================================
# PROXY CONFIGURATION
# ============================================================================
PORT=8082

# Model name configuration - tells proxy what model names to expect from Claude Code
ANTHROPIC_DEFAULT_HAIKU_MODEL=zai-4.7
# ANTHROPIC_DEFAULT_OPUS_MODEL - leave unset to use real Claude Opus (your subscription)
# ANTHROPIC_DEFAULT_SONNET_MODEL - leave unset to use real Claude Sonnet (your subscription)

# Timeout configuration (optional, defaults shown)
# CONNECT_TIMEOUT=10      # Connection timeout in seconds
# READ_TIMEOUT=300        # Read timeout (per chunk for streaming) in seconds
# WRITE_TIMEOUT=30        # Write timeout in seconds
# POOL_TIMEOUT=5          # Connection pool timeout in seconds

# Retry configuration (optional, defaults shown)
# MAX_RETRIES=3           # Maximum retry attempts for failed requests
# BASE_RETRY_DELAY=1.0    # Initial retry delay in seconds (uses exponential backoff with jitter)
# MAX_RETRY_DELAY=60.0    # Maximum retry delay cap in seconds

# Concurrency control (optional, defaults shown)
# MAX_CONCURRENT_REQUESTS=5  # Maximum concurrent requests per provider (prevents overwhelming)

# Connection pool limits (optional, defaults shown)
# MAX_CONNECTIONS=100          # Total connections across all hosts
# MAX_KEEPALIVE_CONNECTIONS=20 # Keep-alive pool size
# KEEPALIVE_EXPIRY=30.0        # Time to keep idle connections (seconds)

# ============================================================================
# EXAMPLE 1: Z.AI for Haiku only, Claude for Opus/Sonnet (recommended)
# ============================================================================
# Best setup with Claude subscription - use real Claude for quality, Z.AI for cost
# HAIKU_PROVIDER_API_KEY=your_zai_api_key
# HAIKU_PROVIDER_BASE_URL=https://api.z.ai/api/anthropic
#
# # Opus uses real Claude (OAuth) - no config needed
# # Sonnet uses real Claude (OAuth) - no config needed

# ============================================================================
# EXAMPLE 2: Z.AI for all tiers (no Claude subscription needed)
# ============================================================================
# HAIKU_PROVIDER_API_KEY=your_zai_api_key
# HAIKU_PROVIDER_BASE_URL=https://api.z.ai/api/anthropic
#
# OPUS_PROVIDER_API_KEY=your_zai_api_key
# OPUS_PROVIDER_BASE_URL=https://api.z.ai/api/anthropic
#
# SONNET_PROVIDER_API_KEY=your_zai_api_key
# SONNET_PROVIDER_BASE_URL=https://api.z.ai/api/anthropic

# ============================================================================
# CUSTOM PROVIDER (Any Anthropic-compatible API)
# ============================================================================
# Use this to connect to any Anthropic-compatible API endpoint
# Examples: EnowDev, OpenRouter-compatible APIs, custom deployments
#
# API key for your custom provider
CUSTOM_PROVIDER_API_KEY=your_custom_api_key_here
# Base URL for your custom provider API
CUSTOM_PROVIDER_BASE_URL=https://api.your-provider.com
# Model names to use for each tier (check your provider's documentation)
CUSTOM_PROVIDER_SONNET_MODEL=claude-sonnet-4.5
CUSTOM_PROVIDER_HAIKU_MODEL=claude-haiku-4.5
CUSTOM_PROVIDER_OPUS_MODEL=claude-opus-4.5
#
# Note: Models like "claude-sonnet-4.5-thinking" will automatically be routed
# to the Sonnet tier since they contain "sonnet" in the name.

# ============================================================================
# ENOWDEV PROVIDER (OpenAI-compatible API)
# ============================================================================
# Enowdev provides Claude models through an OpenAI-compatible API
# Get API key from: https://enowdev.id
#
# API key for Enowdev (starts with enx_)
ENOWDEV_API_KEY=enx_your_api_key_here
# Base URL for Enowdev API (default: https://api.enowdev.id/v1)
ENOWDEV_BASE_URL=https://api.enowdev.id/v1
# Model names to use for each tier
ENOWDEV_SONNET_MODEL=claude-sonnet-4.5
ENOWDEV_HAIKU_MODEL=claude-haiku-4.5
ENOWDEV_OPUS_MODEL=claude-opus-4.5
#
# Example configuration:
# ENOWDEV_API_KEY=enx_d3ed82a62392b104d02b7b732daa2a44496671063b33d22e1e4c1869446fecab
# ENOWDEV_BASE_URL=https://api.enowdev.id/v1
# ENOWDEV_SONNET_MODEL=claude-sonnet-4.5
# ENOWDEV_HAIKU_MODEL=claude-haiku-4.5
# ENOWDEV_OPUS_MODEL=claude-opus-4.5
#
# Note: Enowdev uses OpenAI-compatible format, so the proxy automatically
# converts between Anthropic and OpenAI API formats.

# ============================================================================
# OAUTH CONFIGURATION (for Anthropic API access)
# ============================================================================
# When SONNET_PROVIDER is not set, the proxy uses Anthropic OAuth for Sonnet
# OAuth token is automatically read from: %USERPROFILE%\.claude\.credentials.json
# Path in JSON: claudeAiOauth.accessToken
#
# Requirements:
# - Active Claude Pro subscription
# - Logged into Claude Code on this machine
# - Token is personal and expires periodically
# - Each PC needs its own OAuth login
#
# NOTE: No configuration needed here - OAuth is automatic!
