================================================================================
CLOUDFLARE TUNNEL - QUICK START GUIDE
================================================================================

CURRENT STATUS:  TUNNEL ACTIVE AND VERIFIED

Tunnel URL: https://buzz-judy-ltd-receives.trycloudflare.com
Health Check:  Passing (HTTP 200)
API Test:  Working
Processes:  Running (Proxy + Tunnel)

================================================================================
WINDOWS USAGE
================================================================================

Start Tunnel:
  start-tunnel.bat

Start in Background:
  start-tunnel-background.bat

Stop Tunnel:
  taskkill //F //IM cloudflared.exe

Check Status:
  tasklist | findstr cloudflared
  curl https://buzz-judy-ltd-receives.trycloudflare.com/health

================================================================================
LINUX/VPS DEPLOYMENT
================================================================================

1. Upload to VPS:
   scp -r . user@your-vps:/opt/claude-code-proxy/

2. Install Dependencies:
   cd /opt/claude-code-proxy
   pip3 install -r requirements.txt
   chmod +x start-tunnel.sh

3. Configure:
   cp .env.example .env
   nano .env  # Set your API keys

4. Start Services:
   python3 proxy.py &
   ./start-tunnel.sh start

5. Get Tunnel URL:
   cat TUNNEL_URL.txt

6. Verify:
   curl $(cat TUNNEL_URL.txt)/health

================================================================================
SYSTEMD SERVICE (Production)
================================================================================

See DEPLOYMENT_SUMMARY.md for complete systemd setup instructions.

Quick setup:
  sudo cp systemd/*.service /etc/systemd/system/
  sudo systemctl daemon-reload
  sudo systemctl enable claude-proxy cloudflare-tunnel
  sudo systemctl start claude-proxy cloudflare-tunnel

================================================================================
IMPORTANT FILES
================================================================================

Configuration:
  .env                    - API keys and settings (DO NOT COMMIT)
  config.json             - Runtime configuration

Scripts:
  start-tunnel.bat        - Windows tunnel manager
  start-tunnel.sh         - Linux tunnel manager (auto-downloads cloudflared)
  start-tunnel-background.bat - Windows background startup

Documentation:
  DEPLOYMENT_SUMMARY.md   - Complete deployment guide
  TUNNEL_SETUP.md         - Detailed tunnel setup instructions
  README.md               - Main project documentation

Runtime:
  TUNNEL_URL.txt          - Current tunnel URL
  tunnel.log              - Cloudflared logs
  token_usage.json        - Token usage tracking

================================================================================
VERIFICATION COMMANDS
================================================================================

Health Check:
  curl https://your-tunnel-url/health

Test API:
  curl -X POST https://your-tunnel-url/v1/messages \
    -H "Content-Type: application/json" \
    -H "anthropic-version: 2023-06-01" \
    -d '{"model":"claude-sonnet-4-5-20250929","messages":[{"role":"user","content":"Hello"}],"max_tokens":50}'

Dashboard:
  https://your-tunnel-url/dashboard

Usage Stats:
  https://your-tunnel-url/api/usage/stats

================================================================================
TROUBLESHOOTING
================================================================================

Tunnel Not Connecting:
  1. Check proxy is running: curl http://localhost:8082/health
  2. Check tunnel logs: tail -f tunnel.log
  3. Restart: ./start-tunnel.sh restart

URL Not Found:
  1. Wait 15-20 seconds after starting
  2. Extract manually: grep -o "https://.*\.trycloudflare\.com" tunnel.log | tail -1

Connection Errors:
  1. Verify port 8082 is not blocked
  2. Check firewall rules
  3. Ensure proxy server is running

================================================================================
SECURITY NOTES
================================================================================

- Set PROXY_API_KEY in .env for authentication
- Never commit .env file to git
- Use strong, random API keys
- Cloudflare tunnel provides automatic HTTPS
- Free tunnels have no uptime guarantee (use named tunnel for production)

================================================================================
SUPPORT
================================================================================

Documentation:
  - DEPLOYMENT_SUMMARY.md - Complete deployment guide
  - TUNNEL_SETUP.md - Tunnel-specific instructions
  - README.md - Project overview

Logs:
  - tunnel.log - Cloudflared logs
  - Check systemd logs: sudo journalctl -u cloudflare-tunnel -f

================================================================================
READY FOR VPS DEPLOYMENT 
================================================================================

All files committed and ready to push to repository.
Tunnel verified working on current system.
Scripts tested and documented.

Next steps:
  1. git push origin main
  2. Deploy to VPS following instructions above
  3. Update your Claude Code instances with new tunnel URL

================================================================================
